getStringで表示するレコードの識別


疑問→リンクタグにgetStringを使う書き方、何をインポートしてメソッドを使うのか


sqlと変数を合わせる

sql = "UPDATE Table SET" 更新処理 "WHERE name" = userName;


更新処理→point =100 などなので、"Content ="+getParameter("text");
（全体適用させたい）


→"Content ="+getParameter("content")+",name ="+getParameter("name")+......


メインのmodelクラスを使う。
必要なのはdaoとmodel(logic)とサーブレットとjsp
jsp→更新画面、パラメータを飛ばす
サーブレット→更新画面とメイン画面へのフォワード、パラメータを受け取ってmodelでdaoに渡す処理
dao→DB接続、sql実行、結果をリストに格納、切断






servlet.jsp
String contnet = request.getParameter("content");
String name = request.getParameter("name");

Content content= new Content(content,name);
updatelogic update = new updatelogid();
update.execute();

forward("/WEB-INF/loginOK");



dao.java

Connection conn =null;

sql="update ";



SQLでレコードの更新だけしたい。リストに格納するとかはいらない。
dao→SQL実行するだけ
サーブレット→jspの内容をdaoに飛ばす
logic→リストから飛ばす？


jspの内容をサーブレットで受け取ってリストに格納、logicでリストを受け取ってリストを返す、daoでリストを受け取って内容をアップデートする



update.jsp
<input type = "text" name="content">

updateservlet.java

String content = request.getParameter("content");
String name = request.getParameter("name");

List<content> list = new ArrayList<content>();

Content content = new Content(content,name);

list.add(content);


dao.jsp
List<content> list = 



疑問→サーブレットで受け取ったパラメータをdaoに渡す方法、logicには何を書けばいいのか、daoでリストからどうやってリストの内容を取得するのか
そもそもリストでパラメータを移動させるべきか

logic→return list
logicはexecuteするもの
logicで使える方法
model,daoに値をセットするhealth.setUser(userName);


サーブレットで受け取ったパラメータをlogic処理

model.java
public class model implements Seriarizable{
private content,name;
public setContent
public setName
public getContent
public getName
}



servlet.java
model model = new model(content,name);
logic logic = new logic();
logic.execute(model);

サーブレットから渡した内容がlogic.javaに渡してdaoで処理される

logic.java
execute(model model){

dao dao = new dao();
dao.update(model);
}

dao.java

sql="update ～";


pStmt.setString(1,model.setComtent());
pStmt.setString(2.model.setName());





jspリンクとテーブルの内容と表示するレコードの内容を合わせる方法


<a href="<%= content.getContent()%>">


・テーブルのtd,trにclass,nameを一つずつ設定しjsでデータを受け取る

name を設定するとしたらfor文の変数を設定する
か、それと同じ方法で設定する

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
<script type="text/javascript">
$(function() {
 
    $("#btn").click(function(){
 
        $.ajax({
            type: "POST",
		//POST送信を行うファイル名を指定する
            url: "ajax.php",
            data: {
		//ここに送信するデータを設定
		//'user_id':22

                "page": 2
            },
            success: function(j_data){
 
                // 処理を記述
 
            }
        });
 
    });
 
});
</script>